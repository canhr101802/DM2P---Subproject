{"mappings":"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","sources":["src/js/DragControls.js"],"sourcesContent":["( function () {\n\n\tconst _plane = new THREE.Plane();\n\n\tconst _raycaster = new THREE.Raycaster();\n\n\tconst _pointer = new THREE.Vector2();\n\n\tconst _offset = new THREE.Vector3();\n\n\tconst _intersection = new THREE.Vector3();\n\n\tconst _worldPosition = new THREE.Vector3();\n\n\tconst _inverseMatrix = new THREE.Matrix4();\n\n\tclass DragControls extends THREE.EventDispatcher {\n\n\t\tconstructor( _objects, _camera, _domElement ) {\n\n\t\t\tsuper();\n\t\t\t_domElement.style.touchAction = 'none'; // disable touch scroll\n\n\t\t\tlet _selected = null,\n\t\t\t\t_hovered = null;\n\t\t\tconst _intersections = []; //\n\n\t\t\tconst scope = this;\n\n\t\t\tfunction activate() {\n\n\t\t\t\t_domElement.addEventListener( 'pointermove', onPointerMove );\n\n\t\t\t\t_domElement.addEventListener( 'pointerdown', onPointerDown );\n\n\t\t\t\t_domElement.addEventListener( 'pointerup', onPointerCancel );\n\n\t\t\t\t_domElement.addEventListener( 'pointerleave', onPointerCancel );\n\n\t\t\t}\n\n\t\t\tfunction deactivate() {\n\n\t\t\t\t_domElement.removeEventListener( 'pointermove', onPointerMove );\n\n\t\t\t\t_domElement.removeEventListener( 'pointerdown', onPointerDown );\n\n\t\t\t\t_domElement.removeEventListener( 'pointerup', onPointerCancel );\n\n\t\t\t\t_domElement.removeEventListener( 'pointerleave', onPointerCancel );\n\n\t\t\t\t_domElement.style.cursor = '';\n\n\t\t\t}\n\n\t\t\tfunction dispose() {\n\n\t\t\t\tdeactivate();\n\n\t\t\t}\n\n\t\t\tfunction getObjects() {\n\n\t\t\t\treturn _objects;\n\n\t\t\t}\n\n\t\t\tfunction getRaycaster() {\n\n\t\t\t\treturn _raycaster;\n\n\t\t\t}\n\n\t\t\tfunction onPointerMove( event ) {\n\n\t\t\t\tif ( scope.enabled === false ) return;\n\t\t\t\tupdatePointer( event );\n\n\t\t\t\t_raycaster.setFromCamera( _pointer, _camera );\n\n\t\t\t\tif ( _selected ) {\n\n\t\t\t\t\tif ( _raycaster.ray.intersectPlane( _plane, _intersection ) ) {\n\n\t\t\t\t\t\t_selected.position.copy( _intersection.sub( _offset ).applyMatrix4( _inverseMatrix ) );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tscope.dispatchEvent( {\n\t\t\t\t\t\ttype: 'drag',\n\t\t\t\t\t\tobject: _selected\n\t\t\t\t\t} );\n\t\t\t\t\treturn;\n\n\t\t\t\t} // hover support\n\n\n\t\t\t\tif ( event.pointerType === 'mouse' || event.pointerType === 'pen' ) {\n\n\t\t\t\t\t_intersections.length = 0;\n\n\t\t\t\t\t_raycaster.setFromCamera( _pointer, _camera );\n\n\t\t\t\t\t_raycaster.intersectObjects( _objects, true, _intersections );\n\n\t\t\t\t\tif ( _intersections.length > 0 ) {\n\n\t\t\t\t\t\tconst object = _intersections[ 0 ].object;\n\n\t\t\t\t\t\t_plane.setFromNormalAndCoplanarPoint( _camera.getWorldDirection( _plane.normal ), _worldPosition.setFromMatrixPosition( object.matrixWorld ) );\n\n\t\t\t\t\t\tif ( _hovered !== object && _hovered !== null ) {\n\n\t\t\t\t\t\t\tscope.dispatchEvent( {\n\t\t\t\t\t\t\t\ttype: 'hoveroff',\n\t\t\t\t\t\t\t\tobject: _hovered\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\t_domElement.style.cursor = 'auto';\n\t\t\t\t\t\t\t_hovered = null;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( _hovered !== object ) {\n\n\t\t\t\t\t\t\tscope.dispatchEvent( {\n\t\t\t\t\t\t\t\ttype: 'hoveron',\n\t\t\t\t\t\t\t\tobject: object\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\t_domElement.style.cursor = 'pointer';\n\t\t\t\t\t\t\t_hovered = object;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tif ( _hovered !== null ) {\n\n\t\t\t\t\t\t\tscope.dispatchEvent( {\n\t\t\t\t\t\t\t\ttype: 'hoveroff',\n\t\t\t\t\t\t\t\tobject: _hovered\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\t_domElement.style.cursor = 'auto';\n\t\t\t\t\t\t\t_hovered = null;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tfunction onPointerDown( event ) {\n\n\t\t\t\tif ( scope.enabled === false ) return;\n\t\t\t\tupdatePointer( event );\n\t\t\t\t_intersections.length = 0;\n\n\t\t\t\t_raycaster.setFromCamera( _pointer, _camera );\n\n\t\t\t\t_raycaster.intersectObjects( _objects, true, _intersections );\n\n\t\t\t\tif ( _intersections.length > 0 ) {\n\n\t\t\t\t\t_selected = scope.transformGroup === true ? _objects[ 0 ] : _intersections[ 0 ].object;\n\n\t\t\t\t\t_plane.setFromNormalAndCoplanarPoint( _camera.getWorldDirection( _plane.normal ), _worldPosition.setFromMatrixPosition( _selected.matrixWorld ) );\n\n\t\t\t\t\tif ( _raycaster.ray.intersectPlane( _plane, _intersection ) ) {\n\n\t\t\t\t\t\t_inverseMatrix.copy( _selected.parent.matrixWorld ).invert();\n\n\t\t\t\t\t\t_offset.copy( _intersection ).sub( _worldPosition.setFromMatrixPosition( _selected.matrixWorld ) );\n\n\t\t\t\t\t}\n\n\t\t\t\t\t_domElement.style.cursor = 'move';\n\t\t\t\t\tscope.dispatchEvent( {\n\t\t\t\t\t\ttype: 'dragstart',\n\t\t\t\t\t\tobject: _selected\n\t\t\t\t\t} );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tfunction onPointerCancel() {\n\n\t\t\t\tif ( scope.enabled === false ) return;\n\n\t\t\t\tif ( _selected ) {\n\n\t\t\t\t\tscope.dispatchEvent( {\n\t\t\t\t\t\ttype: 'dragend',\n\t\t\t\t\t\tobject: _selected\n\t\t\t\t\t} );\n\t\t\t\t\t_selected = null;\n\n\t\t\t\t}\n\n\t\t\t\t_domElement.style.cursor = _hovered ? 'pointer' : 'auto';\n\n\t\t\t}\n\n\t\t\tfunction updatePointer( event ) {\n\n\t\t\t\tconst rect = _domElement.getBoundingClientRect();\n\n\t\t\t\t_pointer.x = ( event.clientX - rect.left ) / rect.width * 2 - 1;\n\t\t\t\t_pointer.y = - ( event.clientY - rect.top ) / rect.height * 2 + 1;\n\n\t\t\t}\n\n\t\t\tactivate(); // API\n\n\t\t\tthis.enabled = true;\n\t\t\tthis.transformGroup = false;\n\t\t\tthis.activate = activate;\n\t\t\tthis.deactivate = deactivate;\n\t\t\tthis.dispose = dispose;\n\t\t\tthis.getObjects = getObjects;\n\t\t\tthis.getRaycaster = getRaycaster;\n\n\t\t}\n\n\t}\n\n\tTHREE.DragControls = DragControls;\n\n} )();\n"],"names":[],"version":3,"file":"index.d3ef5432.js.map","sourceRoot":"/__parcel_source_root/"}